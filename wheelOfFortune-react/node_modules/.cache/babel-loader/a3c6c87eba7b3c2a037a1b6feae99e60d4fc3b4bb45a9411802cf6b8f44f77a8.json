{"ast":null,"code":"import _objectSpread from\"/Users/daikexin/Desktop/CS514/WheelOfFortuneGame/wheelOfFortune-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/daikexin/Desktop/CS514/WheelOfFortuneGame/wheelOfFortune-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/daikexin/Desktop/CS514/WheelOfFortuneGame/wheelOfFortune-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/daikexin/Desktop/CS514/WheelOfFortuneGame/wheelOfFortune-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'../App.css';import{useGlobalContext}from'../components/GlobalContext';import axios from'axios';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Scores(){var _useGlobalContext=useGlobalContext(),googleID=_useGlobalContext.googleID,updateGoogleID=_useGlobalContext.updateGoogleID;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),records=_useState2[0],setRecords=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];// get username by googleId\nvar getUsername=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(googleId){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('https://wheeloffortune-game.wl.r.appspot.com/user/findByGoogleId',{params:{googleId:googleId}});case 3:response=_context.sent;console.log(response.data);console.log(response.data[0].name);return _context.abrupt(\"return\",response.data[0].name||'');case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error('Error fetching username:',_context.t0);return _context.abrupt(\"return\",'');case 13:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function getUsername(_x){return _ref.apply(this,arguments);};}();// get all the records\nvar displayAll=function displayAll(){axios.get('https://wheeloffortune-game.wl.r.appspot.com/game/findAllGameRecords').then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(response){var usernames,updatedRecords;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Promise.all(response.data.map(function(score){return getUsername(score.googleId);}));case 2:usernames=_context2.sent;//combine usernames and scores\nupdatedRecords=response.data.map(function(score,index){return _objectSpread(_objectSpread({},score),{},{username:usernames[index]});});setRecords(updatedRecords);setLoading(false);console.log(\"updatedRecords\",updatedRecords);case 7:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}()).catch(function(error){setError(error.message);setLoading(false);});};useEffect(function(){googleID?updateGoogleID(googleID):updateGoogleID(localStorage.getItem(\"googleId\"));displayAll();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"Scores\",children:[/*#__PURE__*/_jsx(Link,{to:\"/game\",children:\"Go back to Game page\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Scores\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Records for All players\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsxs(\"table\",{style:{width:'80%',borderCollapse:'collapse',marginTop:'20px',marginLeft:'70px'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'left'},children:\"username\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'left'},children:\" Google ID\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'left'},children:\"Score\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'left'},children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:records.map(function(score){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{textAlign:'left'},children:score.username}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:'left'},children:score.googleId}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:'left'},children:score.score}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:'left'},children:score.timestamp}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:'left'}})]},score.id);})})]})]})]});}export default Scores;","map":{"version":3,"names":["React","useState","useEffect","useGlobalContext","axios","Link","jsx","_jsx","jsxs","_jsxs","Scores","_useGlobalContext","googleID","updateGoogleID","_useState","_useState2","_slicedToArray","records","setRecords","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","getUsername","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","googleId","response","wrap","_callee$","_context","prev","next","get","params","sent","console","log","data","name","abrupt","t0","stop","_x","apply","arguments","displayAll","then","_ref2","_callee2","usernames","updatedRecords","_callee2$","_context2","Promise","all","map","score","index","_objectSpread","username","_x2","catch","message","localStorage","getItem","className","children","to","style","width","borderCollapse","marginTop","marginLeft","textAlign","timestamp","id"],"sources":["/Users/daikexin/Desktop/CS514/WheelOfFortuneGame/wheelOfFortune-react/src/pages/Scores.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport '../App.css';\nimport { useGlobalContext } from '../components/GlobalContext';\nimport axios from 'axios'\nimport { Link } from 'react-router-dom';\n\n\nfunction Scores() {\n  const { googleID, updateGoogleID } = useGlobalContext();\n  const [records, setRecords] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // get username by googleId\n  const getUsername = async (googleId) => {\n    try {\n      const response = await axios.get('https://wheeloffortune-game.wl.r.appspot.com/user/findByGoogleId', {\n        params: {\n          googleId: googleId\n        }\n      });\n\n      console.log(response.data);\n      console.log(response.data[0].name)\n      return response.data[0].name || '';\n    } catch (error) {\n      console.error('Error fetching username:', error);\n      return '';\n    }\n  };\n  // get all the records\n  const displayAll = () => {\n    axios.get('https://wheeloffortune-game.wl.r.appspot.com/game/findAllGameRecords'\n\n    )\n      .then(async (response) => {\n        // use Promise.all to wait for all getUsername\n        const usernames = await Promise.all(response.data.map((score) => getUsername(score.googleId)));\n\n        //combine usernames and scores\n        const updatedRecords = response.data.map((score, index) => ({\n          ...score,\n          username: usernames[index],\n        }));\n\n        setRecords(updatedRecords);\n        setLoading(false);\n        console.log(\"updatedRecords\", updatedRecords);\n      })\n      .catch(error => {\n        setError(error.message);\n        setLoading(false);\n      });\n  };\n  useEffect(() => {\n    googleID ? updateGoogleID(googleID) : updateGoogleID(localStorage.getItem(\"googleId\"))\n    displayAll();\n\n  }, []);\n\n  return (\n    <div className=\"Scores\">\n      <Link to=\"/game\">\n        Go back to Game page\n      </Link>\n      <h1>Scores</h1>\n      <div>\n        <h2>Records for All players</h2>\n        {loading ? (\n          <p>Loading...</p>\n        ) : (\n          <table style={{ width: '80%', borderCollapse: 'collapse', marginTop: '20px', marginLeft: '70px' }}>\n            <thead>\n              <tr>\n                <th style={{ textAlign: 'left' }}>username</th>\n                <th style={{ textAlign: 'left' }}> Google ID</th>\n                <th style={{ textAlign: 'left' }}>Score</th>\n                <th style={{ textAlign: 'left' }}>Date</th>\n              </tr>\n            </thead>\n            <tbody>\n              {records.map((score) => (\n                <tr key={score.id}>\n                  <td style={{ textAlign: 'left' }}>{score.username}</td>\n                  <td style={{ textAlign: 'left' }}>{score.googleId}</td>\n                  <td style={{ textAlign: 'left' }}>{score.score}</td>\n                  <td style={{ textAlign: 'left' }}>{score.timestamp}</td>\n                  <td style={{ textAlign: 'left' }}>\n\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n\n\n      </div>\n    </div>\n  );\n}\n\nexport default Scores;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}